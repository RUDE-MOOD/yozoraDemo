# ノスタージア WEB3Dのデモです

# TODO LIST
```bash
＝＝＝やり直し＝＝＝
1.ドーム形を立方体にする
2.レイヤーを積み上げること

＝＝＝機能系＝＝＝
1.meshを作って一つの星を打ち上げる
2.dreiライブラリのTextを作って星の情報を画面上に表示する
3.UIを追加して、入力欄を追加
＝＝＝ビジュアル系＝＝＝
後回し
...
```

# 環境初期化
1.git cloneまたはソースコードをダウンロードする<br>
2.フォルダーパスのターミナルを開いてyarnでライブラリを初期化（学校のネットワークでうまくできない場合はテザリングなど別のネット環境でリトライ）<br>
3.初期化ができ次第、yarn devで実行する<br>


<h2>レイヤー構造</h2>
<h4>プラネタリウム自体が７つのレイヤーでできている。</h4>
<ol>
  <li>背景（宇宙の色）<br>Three.jsのシェーダー。自由に変えられるようにするため画像を使用しない。</li>
  <li>流体層（天の川風）<br>GPUへの負荷の最小限に抑えるため、ノイズシェーダーを使用。UVマップをゆっくりずらすことで動いているように見せる。</li>
  <li>背景の遠い星 <br>ユーザーが操作しないのでノイズマップですませる。</li>
  <li>霧 <br>さらに立体感を出すためのレイヤー。3Dボリュームでやるとすごく重たくなるのでこれもノイズマップで実現する。深度に応じて透明度の変化もできる。</li>
  <li>星（ユーザーが操作できる）<br>3Dで描画する。ユーザーの感情やその日の重要度に応じて輝度、大きさ、色が変化。レンダーしないグリッド上に存在する。ユーザーが押下するとその思い出のメニューが出てくる。</li>
  <li>ビネット <br>画面の角を暗くすることで立体感が出る。</li>
  <li>UI描画 （ユーザーが操作できる）<br>メニューやボタンのような要素を描画するレイヤー</li>
</ol>
<p>こういう風にレイヤー毎に分けると、各要素を独立させレイヤー同士の直接依存が生じず拡張性を高めることができる。レイヤー毎の描画トグル・テーマの切り替え・低スペック端末向けのパフォーマンス描画モードも実装可能。</p>

# コンポーネント
## Earth
MeshReflectorMaterialで海流を土台にしている<br>
Sparklesで近距離の星を描画

## Effects
フィルターをかけて見てビジュアルを向上するために、一応levaのコントローラーで色々なpostprocessing効果やってみるように

## Experience
コンポーネントを組み合わせ用のフィアル、画面に移動できるOrbitControlsを追加した

## Skydome　（やり直し予定！）
夜空真似の半球体、星などはこの半球体の内部で動く<br>
半球体のシェーダーも一緒に書いてある<br>
dreiからのStarsは背景の遠い星を構成してる<br>


